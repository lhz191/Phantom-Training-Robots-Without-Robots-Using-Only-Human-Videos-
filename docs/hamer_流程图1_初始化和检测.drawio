<mxfile host="app.diagrams.net" modified="2023-11-21T12:00:00.000Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36" etag="2" version="15.8.6" type="device">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="1822" dy="1198" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-2" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-3" target="WIyWlLk6GJQsqaUBKTNV-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-3" value="初始化阶段" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="80" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="P3RjGtai6nAaVAYAQjJ4-19" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;HaMeR原始demo.py详细流程图 - 第1部分：初始化和检测&lt;/b&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="330" y="30" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-0" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="350" y="60" width="20" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-1" value="1. 解析命令行参数(checkpoint, img_folder, out_folder等)&lt;br&gt;2. 下载和加载HaMeR模型checkpoint&lt;br&gt;3. 设置设备(CUDA/CPU)&lt;br&gt;4. 加载人体检测器(ViTDet/RegNetY)&lt;br&gt;5. 加载关键点检测器(ViTPose)&lt;br&gt;6. 初始化渲染器(Renderer)" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="380" y="50" width="330" height="100" as="geometry" />
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-4" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-6" target="WIyWlLk6GJQsqaUBKTNV-10" edge="1">
          <mxGeometry y="20" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-6" value="图像处理阶段" style="rhombus;whiteSpace=wrap;html=1;shadow=0;fontFamily=Helvetica;fontSize=12;align=center;strokeWidth=1;spacing=6;spacingTop=-4;fillColor=#d5e8d4;strokeColor=#82b366;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="160" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-2" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="350" y="150" width="20" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-3" value="1. 寻找img_folder中符合file_type的所有图像&lt;br&gt;2. 对每个图像进行循环处理&lt;br&gt;3. 使用cv2.imread读取图像&lt;br&gt;4. 准备RGB和BGR版本的图像" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="380" y="160" width="330" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-8" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-10" target="WIyWlLk6GJQsqaUBKTNV-11" edge="1">
          <mxGeometry x="0.3333" y="20" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-10" value="人体检测阶段" style="rhombus;whiteSpace=wrap;html=1;shadow=0;fontFamily=Helvetica;fontSize=12;align=center;strokeWidth=1;spacing=6;spacingTop=-4;fillColor=#d5e8d4;strokeColor=#82b366;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="240" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-4" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="350" y="230" width="20" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-5" value="1. 使用detector(ViTDet或RegNetY)检测图像中的人&lt;br&gt;2. 筛选class=0(人类)且score&amp;gt;0.5的检测结果&lt;br&gt;3. 提取边界框坐标(pred_bboxes)和置信度(pred_scores)" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="380" y="240" width="330" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-11" value="关键点检测阶段" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="320" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-6" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="350" y="310" width="20" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-7" value="1. 对每个检测到的人使用ViTPose模型预测全身关键点&lt;br&gt;2. 从输出中提取手部关键点(左手-42:-21, 右手-21:)" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="380" y="310" width="330" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P3RjGtai6nAaVAYAQjJ4-0" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-11" target="P3RjGtai6nAaVAYAQjJ4-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="245" y="360" as="sourcePoint" />
            <mxPoint x="245" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P3RjGtai6nAaVAYAQjJ4-1" value="手部边界框提取" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="380" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-8" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="350" y="380" width="20" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-9" value="1. 对左右手分别处理&lt;br&gt;2. 筛选置信度&amp;gt;0.6的关键点&lt;br&gt;3. 如果有效点&amp;gt;3，计算包围这些点的边界框&lt;br&gt;4. 将边界框和左右手标志(is_right=0/1)添加到列表中" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="380" y="380" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="P3RjGtai6nAaVAYAQjJ4-2" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="P3RjGtai6nAaVAYAQjJ4-1" target="P3RjGtai6nAaVAYAQjJ4-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="245" y="430" as="sourcePoint" />
            <mxPoint x="245" y="480" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P3RjGtai6nAaVAYAQjJ4-3" value="数据准备阶段" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="480" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-10" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="350" y="470" width="20" height="60" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-11" value="1. 调用ViTDetDataset创建数据集，传入:&lt;br&gt;&amp;nbsp; &amp;nbsp;- 配置信息(model_cfg)&lt;br&gt;&amp;nbsp; &amp;nbsp;- 图像(img_cv2)&lt;br&gt;&amp;nbsp; &amp;nbsp;- 边界框(boxes)和左右手标志(right)" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="380" y="470" width="330" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P3RjGtai6nAaVAYAQjJ4-4" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="P3RjGtai6nAaVAYAQjJ4-3" target="P3RjGtai6nAaVAYAQjJ4-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="245" y="470" as="sourcePoint" />
            <mxPoint x="245" y="520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P3RjGtai6nAaVAYAQjJ4-5" value="HaMeR 3D手部估计阶段" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#f8cecc;strokeColor=#b85450;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="550" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1-L1d0sxnf6r6qPiPM18-30" value="续下一图" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=16;fontStyle=1" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="160" y="610" width="170" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile> 